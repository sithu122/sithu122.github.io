<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Register</title>
</head>
<body>
    <div id="addStudent">
        <h3>Add New Student</h3>
        Name: <input type="text" name="name" id="name"> <br> <br>
        Email: <input type="email" name="email" id="email"> <br> <br>
        Phone: <input type="number" name="phone" id="phone"> <br> <br>
        Year: <select name="year" id="year">
            <option value="">Choose Year</option>
            <option value="First Year">First Year</option>
            <option value="Second Year">Second Year</option>
            <option value="Third Year">Third Year</option>
        </select> <br><br>
        <button id="add">Add Student</button>
    </div>

    <h3>Student List</h3>
    <table border="1" cellspacing="0" cellpadding="20">
        <thead>
            <tr>
                <th>No.</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Year</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="body">
            

        </tbody>
    </table>


    <script src="jquery.min.js"></script>
    <script>
        $(document).ready(function(){

            getData();

           

            function getData() {
                let stuString =localStorage.getItem("students");
               if (stuString) {
                let stuArray =JSON.parse(stuString);
                let data ='';
                let i=1 ;
                $ .each(stuArray, function(i,v){
                data += `<tr>
                <td>${i++}</td>
                <td>${v.stu_name}</td>
                <td>${v.stu_email}</td>
                <td>${v.stu_phone}</td>
                <td>${v.stu_year}</td>
                <td> <button id="edit">Edit</button><button id="delete" data-id="${i}">Delete</button></td>
                
                </tr>`
                });
                $('#body').html(data);
               }
            }
            
            $('#add').click(function(){
                let name = $('#name').val();
                let email = $('#email').val();
                let phone = $('#phone').val();
                let year = $('#year').val();
              console.log(name,email,phone,year);

                 let students_obj={
                    stu_name:name,
                    stu_email:email,
                    stu_phone:phone,
                    stu_year:year


                 }
                 console.log(students_obj);

                  let stuString =localStorage.getItem("students");
                  let stuArray;
                   if (stuString==null){
                         stuArray =[];

                     }else{
                        stuArray = JSON.parse(stuString);
                     }
                     stuArray.push(students_obj);

                    let stuData =JSON.stringify(stuArray)  
                     localStorage.setItem("students",stuData)
                      
                     getData();

            
            })
            
            $('#body').on('click','#delete',function(){
                let id =$(this).data('id');
                console.log(id);
            })
        });
    </script>
</body>
</html>